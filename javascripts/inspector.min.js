(function(){function f(a,b){a=a.replace(/\/$/,"");b=b.replace(/^\//,"");return a+"/"+b}function e(a,b){var c=a.attr(b);(typeof c==="undefined"||c.search(/^(http|https):\/\//)!=-1||c.search(/^\/\//)!=-1?true:false)||(c.search(/^\//)!=-1?a.attr(b,f(g,c)):a.attr(b,f(h,c)))}function k(){jQuery("title").html("Inspector");jQuery("a").each(function(){e(jQuery(this),"href")});jQuery("img").each(function(){e(jQuery(this),"src")});jQuery("link").each(function(){e(jQuery(this),"href")});jQuery("frame").each(function(){e(jQuery(this),
"src")});jQuery("script").each(function(){e(jQuery(this),"src")});var a=jQuery('<iframe src="/tips" scrolling="no" id="lan-tips"><p>Your browser does not support iframes.</p></iframe>');a.css({position:"fixed",left:"0px",bottom:"0px",width:"100%",height:"65px","border-style":"none",overflow:"hidden","z-index":i});a.bind("mouseover",function(){if(a.css("bottom")=="0px"){a.css("bottom","");a.css("top","0px")}else{a.css("bottom","0px");a.css("top","")}});jQuery("body").append(a)}var g,h,i=2147483646,
j=function(){this.highlighter=this.oldElement=null};j.prototype={startInspecting:function(a){this.highlight(a)},stopInspecting:function(a){var b=a.target;a=jQuery("input#lan-email").attr("value");var c=jQuery("input#lan-request-url").attr("value");b=escape(this.getElementXPath(b));window.location="/submit?email="+a+"&url="+c+"&xpath="+b},highlight:function(a){a=a.target;if(this.oldElement!=a){this.oldElement&&this.highlighter&&document.body.removeChild(this.highlighter);this.oldElement=a;this.highlighter=
this.getHighlighter(a);document.body.appendChild(this.highlighter)}},getLTRBWH:function(a){var b={left:0,top:0,right:0,bottom:0,width:0,height:0};if(a){a=a.getBoundingClientRect();b.left=a.left;b.top=a.top;b.right=a.right;b.bottom=a.bottom;if(a.width){b.width=a.width;b.height=a.height}else{b.width=b.right-b.left;b.height=b.bottom-b.ptop}}return b},getHighlighter:function(a){var b=document.createElement("div");a=this.getLTRBWH(a);b.style.cssText="left: "+a.left+"px !important; top: "+a.top+"px !important; width: "+
a.width+"px !important; height: "+a.height+"px !important; position: fixed !important; z-index: "+i+" !important; pointer-events: none !important; box-shadow: 0 0 2px 2px #3875D7 !important; -moz-box-shadow: 0 0 2px 2px #3875D7 !important; -webkit-box-shadow: 0 0 2px 2px #3875D7 !important;";return b},getElementXPath:function(a){return a&&a.id?'//*[@id="'+a.id+'"]':this.getElementTreeXPath(a)},getElementTreeXPath:function(a){for(var b=[];a&&a.nodeType==1;a=a.parentNode){for(var c=0,d=a.previousSibling;d;d=
d.previousSibling)d.nodeType!=Node.DOCUMENT_TYPE_NODE&&d.nodeName==a.nodeName&&++c;d=a.nodeName.toLowerCase();b.splice(0,0,d+(c?"["+(c+1)+"]":""))}return b.length?"/"+b.join("/"):null},getOuterHTML:function(a){return jQuery("<div></div>").append(jQuery(a).clone()).html()}};jQuery(document).ready(function(){g=unescape(jQuery("input#lan-url-host").attr("value"));h=unescape(jQuery("input#lan-url-path").attr("value"));k();var a=new j;jQuery("body").bind("mouseover",function(b){a.startInspecting(b)});
jQuery("body").bind("mouseup",function(b){a.stopInspecting(b)});jQuery("body").bind("click",function(b){b.stopPropagation();b.preventDefault()})})})();